# å¿«äººå¿«è¯­ (FastVoice)

> æœ¬åœ°ä¼˜å…ˆçš„ AI è¯­éŸ³è¾“å…¥æ³• - æ¯«ç§’å“åº”ï¼Œéšç§å®‰å…¨

[![Python](https://img.shields.io/badge/Python-3.10+-blue.svg)](https://www.python.org/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| ğŸ¤ **è¯­éŸ³è¾“å…¥** | æŒ‰ä½å¿«æ·é”®è¯´è¯ï¼Œæ¾å¼€å³è½¬æ¢ä¸ºæ–‡å­— |
| ğŸŒ **æ™ºèƒ½ç¿»è¯‘** | æœ¬åœ°ç¦»çº¿ç¿»è¯‘ï¼Œæ”¯æŒä¸­è‹±äº’è¯‘ |
| ğŸ”¢ **æ•°å­—è½¬æ¢** | æ™ºèƒ½è¯†åˆ«å¹¶è½¬æ¢ä¸­æ–‡æ•°å­—ï¼ˆå¹ºä¸‰å…«â†’138ã€é›¶ä¸€äºŒä¸‰â†’0123ï¼‰ |
| âš¡ **æé€Ÿå“åº”** | ç«¯ä¾§æ¨¡å‹ï¼Œæ¯«ç§’çº§è¯†åˆ«é€Ÿåº¦ |
| ğŸ”’ **éšç§å®‰å…¨** | éŸ³é¢‘æœ¬åœ°å¤„ç†ï¼Œä¸ä¸Šä¼ äº‘ç«¯ |
| âš™ï¸ **çµæ´»é…ç½®** | è‡ªå®šä¹‰å¿«æ·é”®ã€éº¦å…‹é£ã€ç¿»è¯‘æ¨¡å¼ |
| ğŸ“ **éŸ³é¢‘ç®¡ç†** | è‡ªåŠ¨æ¸…ç†å’Œç®¡ç†å½•éŸ³æ–‡ä»¶ |

---

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

| é¡¹ç›® | è¦æ±‚ |
|------|------|
| **æ“ä½œç³»ç»Ÿ** | macOS 10.15+ / Windows 10+ |
| **Python** | 3.10+ |
| **å†…å­˜** | 8GB+ (æ¨è 16GB) |
| **ç£ç›˜ç©ºé—´** | 5GB+ (æ¨¡å‹æ–‡ä»¶) |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/dspcter/ai-automation-tools.git
cd ai-automation-tools/å¿«äººå¿«è¯­

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å¯åŠ¨ç¨‹åº
python main.py
```

### é¦–æ¬¡è¿è¡Œ

é¦–æ¬¡å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨ï¼š
1. ä¸‹è½½ SenseVoice è¯­éŸ³è¯†åˆ«æ¨¡å‹ (~700MB)
2. æ‰“å¼€è®¾ç½®çª—å£è¿›è¡Œåˆå§‹é…ç½®
3. å¼•å¯¼å®Œæˆè‡ªåŠ¨åˆ›å»ºæ ‡è®°æ–‡ä»¶

---

## âŒ¨ï¸ ä½¿ç”¨è¯´æ˜

### é»˜è®¤å¿«æ·é”®

| åŠŸèƒ½ | macOS | Windows |
|------|-------|---------|
| **è¯­éŸ³è¾“å…¥** | æŒ‰ä½ `Option` | æŒ‰ä½ `Right Ctrl` |
| **å¿«é€Ÿç¿»è¯‘** | æŒ‰ä½ `Right Cmd` | æŒ‰ä½ `Right Cmd` |

### ä½¿ç”¨ç¤ºä¾‹

```
1. æŒ‰ä½ Option é”®
2. è¯´è¯ï¼š"ä»Šå¤©å¤©æ°”çœŸä¸é”™"
3. æ¾å¼€ Option é”®
4. æ–‡å­—è‡ªåŠ¨æ³¨å…¥åˆ°å…‰æ ‡ä½ç½®
```

### æ•°å­—è½¬æ¢ç¤ºä¾‹

| è¾“å…¥ | è¾“å‡º | è¯´æ˜ |
|------|------|------|
| å¹ºä¸‰å…« | 138 | ç”µè¯å·ç  |
| é›¶ä¸€äºŒä¸‰ | 0123 | ä¿ç•™å‰å¯¼é›¶ |
| ä¸€äºŒä¸‰å››äº” | 12345 | è¿ç»­æ•°å­— |
| åä¸€ä¸‡ | 110000 | å¤§å•ä½ |
| ä¸€ä¸ªäº¿ | 100000000 | äº¿å•ä½ |

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| æ¨¡å— | æŠ€æœ¯æ–¹æ¡ˆ |
|------|---------|
| **è¯­éŸ³è¯†åˆ«** | sherpa-onnx + SenseVoice-small |
| **ç¿»è¯‘å¼•æ“** | MarianMT (ç¦»çº¿) / Qwen2.5-1.5B |
| **æ•°å­—è½¬æ¢** | cn2an (è‡ªå®šä¹‰å¢å¼º) |
| **å¿«æ·é”®ç›‘å¬** | pynput |
| **éŸ³é¢‘é‡‡é›†** | sounddevice + webrtcvad |
| **æ–‡å­—æ³¨å…¥** | pyautogui (å‰ªè´´æ¿æ–¹å¼) |
| **è®¾ç½®ç•Œé¢** | PyQt6 |
| **æ‰“åŒ…å·¥å…·** | PyInstaller |

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
å¿«äººå¿«è¯­/
â”œâ”€â”€ main.py                     # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ requirements.txt            # ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ README.md                   # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ PRD.md                      # äº§å“éœ€æ±‚æ–‡æ¡£
â”œâ”€â”€ PROJECT_SUMMARY.md          # é¡¹ç›®æ€»ç»“
â”œâ”€â”€ å®‰è£…è¯´æ˜.md                  # å®‰è£…æŒ‡å—
â”‚
â”œâ”€â”€ core/                       # æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ hotkey_manager.py       # å…¨å±€å¿«æ·é”®ç›‘å¬
â”‚   â”œâ”€â”€ audio_capture.py        # éŸ³é¢‘é‡‡é›† + VAD
â”‚   â”œâ”€â”€ asr_engine.py           # SenseVoice è¯­éŸ³è¯†åˆ«
â”‚   â”œâ”€â”€ marianmt_engine.py      # MarianMT ç¿»è¯‘
â”‚   â”œâ”€â”€ translate_engine.py     # Qwen2.5 ç¿»è¯‘
â”‚   â”œâ”€â”€ text_injector.py        # æ–‡å­—æ³¨å…¥
â”‚   â””â”€â”€ text_postprocessor.py    # æ–‡æœ¬åå¤„ç† + æ•°å­—è½¬æ¢
â”‚
â”œâ”€â”€ models/                     # æ¨¡å‹ç®¡ç†
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ model_manager.py        # æ¨¡å‹ä¸‹è½½/ç®¡ç†/æ£€æµ‹
â”‚   â””â”€â”€ models/                 # æœ¬åœ°æ¨¡å‹å­˜å‚¨ç›®å½•
â”‚       â”œâ”€â”€ asr/               # è¯­éŸ³è¯†åˆ«æ¨¡å‹
â”‚       â””â”€â”€ translation/       # ç¿»è¯‘æ¨¡å‹
â”‚
â”œâ”€â”€ ui/                         # ç”¨æˆ·ç•Œé¢
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ settings_window.py      # PyQt6 è®¾ç½®çª—å£
â”‚   â””â”€â”€ first_run_wizard.py     # é¦–æ¬¡è¿è¡Œå‘å¯¼
â”‚
â”œâ”€â”€ config/                     # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ constants.py            # å¸¸é‡å®šä¹‰
â”‚   â””â”€â”€ settings.py             # é…ç½®è¯»å†™
â”‚
â”œâ”€â”€ storage/                    # æ•°æ®å­˜å‚¨
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ audio_manager.py        # éŸ³é¢‘æ–‡ä»¶ç®¡ç†
â”‚
â”œâ”€â”€ audio/recordings/           # å½•éŸ³æ–‡ä»¶å­˜å‚¨
â”œâ”€â”€ assets/                     # èµ„æºæ–‡ä»¶ (å›¾æ ‡)
â””â”€â”€ logs/                       # æ—¥å¿—æ–‡ä»¶
```

---

## âš™ï¸ é…ç½®è¯´æ˜

é…ç½®æ–‡ä»¶ä½äº `config/settings.json`:

```json
{
  "hotkeys": {
    "voice_input": "option",
    "quick_translate": "right_cmd"
  },
  "audio": {
    "sample_rate": 16000,
    "vad_threshold": 500
  },
  "translation": {
    "mode": "button",
    "target_language": "en",
    "source_language": "zh"
  },
  "cleanup": {
    "enabled": true,
    "days": 7
  }
}
```

### å¿«æ·é”®é…ç½®

æ”¯æŒçš„å¿«æ·é”®æ ¼å¼ï¼š
- å•é”®: `fn`, `ctrl`, `alt`, `shift`, `cmd`
- ç»„åˆé”®: `ctrl+shift+t`, `cmd+space`
- ä¿®é¥°é”®: `right_ctrl`, `right_alt`, `right_cmd`

---

## ğŸ”§ å¼€å‘

### è¿è¡Œå¼€å‘æ¨¡å¼

```bash
cd å¿«äººå¿«è¯­
python main.py
```

### æ‰“åŒ…åº”ç”¨

```bash
# macOS
chmod +x build.sh
./build.sh

# Windows
build.bat
```

### è¿è¡Œæµ‹è¯•

```bash
# æµ‹è¯•è¯­éŸ³è¯†åˆ«
python test_dependencies.py

# æµ‹è¯•ç¿»è¯‘å¼•æ“
python test_marianmt.py

# æµ‹è¯•æ•°å­—è½¬æ¢
python3 -c "import cn2an; print(cn2an.transform('å¹ºä¸‰å…«é›¶ä¸€äºŒä¸‰'))"
```

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.1 (2026-01-02)

**æ–°åŠŸèƒ½**
- âœ¨ æ™ºèƒ½ä¸­æ–‡æ•°å­—è½¬æ¢ï¼ˆcn2an é›†æˆï¼‰
- ğŸ”¢ æ”¯æŒ"å¹º"â†’"1"è½¬æ¢
- ğŸ”¢ ä¿ç•™å‰å¯¼é›¶ï¼ˆé›¶ä¸€äºŒä¸‰â†’0123ï¼‰
- ğŸ”¢ è¿ç»­æ•°å­—è½¬æ¢ï¼ˆä¸€äºŒä¸‰å››äº”â†’12345ï¼‰

**ä¿®å¤**
- ğŸ› ä¿®å¤ Right Command é”®ç›‘å¬é—®é¢˜
- ğŸ› ä¿®å¤éŸ³é¢‘æ–‡ä»¶åˆ é™¤åŠŸèƒ½
- ğŸ› ä¼˜åŒ–å¿«æ·é”®æ˜ å°„é€»è¾‘

---

## â“ å¸¸è§é—®é¢˜

### Q: é¦–æ¬¡å¯åŠ¨æç¤ºæƒé™é”™è¯¯ï¼Ÿ

**A**: macOS éœ€è¦åœ¨ã€Œç³»ç»Ÿè®¾ç½® â†’ éšç§ä¸å®‰å…¨æ€§ â†’ è¾…åŠ©åŠŸèƒ½ã€ä¸­æˆæƒ

### Q: æ¨¡å‹ä¸‹è½½å¤±è´¥ï¼Ÿ

**A**:
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. æ‰‹åŠ¨ä¸‹è½½ï¼š
   ```bash
   # SenseVoice æ¨¡å‹
   wget https://github.com/k2-fsa/sherpa-onnx/releases/download/asr-models/sherpa-onnx-sense-voice-zh-en-ja-ko-yue-2024-07-17.tar.bz2
   tar -xf sherpa-onnx-sense-voice-zh-en-ja-ko-yue-2024-07-17.tar.bz2
   mv sherpa-onnx-sense-voice-zh-en-ja-ko-yue-2024-07-17/* models/models/asr/sense-voice/
   ```

### Q: å¿«æ·é”®å†²çªï¼Ÿ

**A**: åœ¨è®¾ç½®çª—å£ä¸­è‡ªå®šä¹‰å…¶ä»–å¿«æ·é”®ç»„åˆ

### Q: æ•°å­—è½¬æ¢ä¸å·¥ä½œï¼Ÿ

**A**:
1. ç¡®è®¤å·²å®‰è£… `cn2an` åº“ï¼š`pip install cn2an`
2. æ£€æŸ¥æ—¥å¿—æ–‡ä»¶ `logs/*.log`

---

## ğŸ™ è‡´è°¢

æœ¬é¡¹ç›®åŸºäºä»¥ä¸‹ä¼˜ç§€çš„å¼€æºé¡¹ç›®ï¼š

- [Sherpa-ONNX](https://github.com/k2-fsa/sherpa-onnx) - è¯­éŸ³è¯†åˆ«æ¡†æ¶
- [Qwen2.5](https://github.com/QwenLM/Qwen2.5) - é€šä¹‰åƒé—®å¤§æ¨¡å‹
- [MarianMT](https://github.com/Helsinki-NLP/MarianMT) - ç¥ç»æœºå™¨ç¿»è¯‘
- [cn2an](https://github.com/Ailln/cn2an) - ä¸­æ–‡æ•°å­—è½¬æ¢å·¥å…·
- [pynput](https://github.com/moses-palmer/pynput) - å…¨å±€å¿«æ·é”®ç›‘å¬

**äº§å“çµæ„Ÿ**: é—ªç”µè¯´

---

## ğŸ“„ è®¸å¯è¯

MIT License

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

## ğŸ“® è”ç³»æ–¹å¼

- GitHub Issues: [æäº¤é—®é¢˜](https://github.com/dspcter/ai-automation-tools/issues)
